<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@ page import="model.mboard.MboardDTO" %>
<%@ page import="model.mboard.MboardDAO" %>
<%@ page import="model.notice.NoticeDTO" %>
<%@ page import="model.notice.NoticeDAO" %>
<%@ page import="org.jsoup.Jsoup" %>
<%@ page import="org.jsoup.helper.StringUtil" %>
<%@ page import="org.jsoup.nodes.Document" %>
<%@ page import="org.jsoup.nodes.Element" %>
<%@ page import="org.jsoup.select.Elements" %>
<%@ page import="org.apache.commons.lang3.StringUtils" %>
<%@ page import="java.util.ArrayList" %>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<!DOCTYPE html>
<html><head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ïª§ÎÆ§ÎãàÌã∞</title>
<link rel="stylesheet" type="text/css" href="${pageContext.request.contextPath}/css/community/loginfreeBoard.css?after">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>

</head>
<body>
  <div class="layout">
    <div class="box">
      <main class=contents>
        <section class="sub_header">
          <div class="sub_inner">
            <div class="logo-wrap">
             <img class="logo" src="${pageContext.request.contextPath}/img/board/boardLogo.PNG">
            </div>
            <h1>Ïª§ÎÆ§ÎãàÌã∞</h1>
            <div class="searchIcon">
            <div class="tooltip-wrap">
              <a><i class="fa-solid fa-magnifying-glass fa-lg" style="color:#efefef"></i></a>
              </div>
            </div>
          </div>
          <button id="myCommunityButton" class="header-right-button my" onclick="">ÎÇ¥ ÌôúÎèô</button>
        </section>
        <div class="content-area">
          <div class="grid-container">
          <section class="top-item top-area divider-line top-area--home">
                <div class="ranking-area">
                  <div class="subtitle-morebtn">
                    <p class="ranking-subtitle">üì¢Í≥µÏßÄÏÇ¨Ìï≠</p>
                    <a href="noticeBoardController">
                      <span>ÎçîÎ≥¥Í∏∞</span>
                    </a>
                  </div>
                  <% ArrayList<NoticeDTO> noticeList = (ArrayList<NoticeDTO>) request.getAttribute("noticeList");%>
                  <div class="swiper-wrap">
                    <div class="swiper-container">
                      <div class="swiper-wrapper">
                       <% for(NoticeDTO nDto : noticeList) { %>
                        <div class="swiper-slide">
                          <a class="notice-post-link" href="ReadNoticeDetailController?no=<%=nDto.getNotice_no()%>">
                            <article class="notice-post-wrap">
                              <h2 class="notice-post-title"><%=nDto.getN_title()%></h2>
                              <div class="admin-info-wrap">
                                <p class="admin-nickname"><%=nDto.getM_nick()%></p>
                                <span class="badge">Í¥ÄÎ¶¨Ïûê</span>
                              </div>
                            </article>
                          </a>
                        </div>
                         <% } %>
                        </div>
                      </div>
                    </div>
					</div>
					<div>
                    <button class="swiper-button-prev" id="allReviewsPrev" tabindex="-1" role="button" aria-label="Previous slide" aria-disabled="true">
                      <svg width="16" height="16" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" preserveAspectRatio="none">
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M5.293 3.05a1 1 0 000 1.415L8.828 8l-3.535 3.536a1 1 0 101.414 1.414l4.23-4.23a1 1 0 00.013-1.427L6.707 3.051a1 1 0 00-1.414 0z" fill="#586A85"></path>
                      </svg>
                    </button>

                    <button class="swiper-button-next" id="allReviewsNext" tabindex="0" role="button" aria-label="Next slide" aria-disabled="false">
                      <svg width="16" height="16" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" preserveAspectRatio="none">
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M5.293 3.05a1 1 0 000 1.415L8.828 8l-3.535 3.536a1 1 0 101.414 1.414l4.23-4.23a1 1 0 00.013-1.427L6.707 3.051a1 1 0 00-1.414 0z" fill="#586A85"></path>
                      </svg>
                    </button>
                  </div>

              </section>
            <section class="list-item list-area list-area--home">
              <div class="list-inner-wrap">
<% ArrayList<MboardDTO> mBoardList = (ArrayList<MboardDTO>) request.getAttribute("mBoardList");int count=1; %>
                <ul id="postList">
                <% for(MboardDTO mDto : mBoardList) { %>
                  <li class="list-gap">
                <input class="num-count" value="<%count++;%>" style="display:none;">
                    <article class="post-wrap">
                      <a class="post-look" href="ReadMateDetailController?no=<%=mDto.getBoardNo()%>">
                        <header class="post-info-wrap">
                         <div class="post-info-userNick">
			               <span class="userNick" style="color:white;"><%= mDto.getMem_nick()%></span>          
                         </div>
                         <div class="post-info-date">
                         <span class="postdate" data-timestamp="<%= mDto.getBoardRegdate().getTime()%>"><%= mDto.getBoardRegdate() %></span>
                         </div>
                        </header>
                        <h2 class="post-title"><%= mDto.getBoardTitle() %></h2>
                        <p id="post-body"><%= mDto.getBoardContents()%></p>
                        <%
                            // jsoupÏùÑ ÏÇ¨Ïö©Ìï¥ Í∏Ä ÎÇ¥Ïö©ÏóêÏÑú img ÌÉúÍ∑∏ Ï∂îÏ∂ú
                            String boardContents = mDto.getBoardContents();
                            Document doc = Jsoup.parse(boardContents);
                            Elements imgTags = doc.select("img");
                            // Ï∂îÏ∂úÎêú img ÌÉúÍ∑∏Í∞Ä ÏûàÎäî Í≤ΩÏö∞
                            if (imgTags != null && imgTags.size() > 0) {
                              // Ï≤´ Î≤àÏß∏ img ÌÉúÍ∑∏Îßå image-put ÌÅ¥ÎûòÏä§Ïóê Ï∂úÎ†•
                              Element img = imgTags.first();
                              String imgSrc = img.attr("src");
                              if (StringUtils.isNotBlank(imgSrc)) { %>
                        
						<div class="picture-wrap">
						<picture>
						<img src="<%= imgSrc %>">
						</picture>
						</div>
						   <% }
                            } %>
                      </a>
                        <footer class="post-footer">
                        <div class="count-wrap">
                        <div class="count-look">
                        <i class="fa-sharp fa-solid fa-eye" style="color: #9199a6;"></i>
                        <span><%= mDto.getViewCount() %></span>
                        </div>
                        <div class="count-reply">
                        <i class="fa-solid fa-comment" style="color: #7e838b;"></i>
                        <span><%=mDto.getReplyCount() %></span>
                        </div>
                        </div>
                        </footer>
                    </article>
                  </li>
                  <% } %>
                </ul>
              </div>
            </section>
            <aside class="side-item side-area side-area--home">
            <div class="user-info-wrap">
             <p class="user-name"><%= session.getAttribute("userNick") %></p>
             <div class="my-link-wrap">
              <a>
              <div id="myPostButton" class="my-link">
              <span class="my-link-label">ÎÇ¥Í∞Ä Ïì¥ Í∏Ä</span>
              <span class="my-count"><%=request.getAttribute("writeCount")%></span>
              </div>
              </a>
              <a>
              	<div id="myCommentButton" class="my-link">
                  <span class="my-link-label">ÎÇ¥Í∞Ä Ïì¥ ÎåìÍ∏Ä</span>
                  <span class="my-count"><%=request.getAttribute("replyCount") %></span>
                </div>
              </a>
             </div>
            </div>
            <div class="write-wrap">
            <button class="write-btn" id="freeboard">
                      <span class="write-btn-matching">ÏûêÏú†Í≤åÏãúÌåê</span>
                      <i class="fa-solid fa-users fa-custom"></i>
                    </button>
            <button class="write-btn" id="writePost">
            <span class="write-btn-text">Í∏Ä ÏûëÏÑ±ÌïòÍ∏∞</span>
            <i class="fa-solid fa-pencil" style="color: #efefef;"></i>
            </button>
            </div>
            </aside>
          </div>
          <div  class="scroll-top-wrap" style="--floatHeight: 24px;">
          <div id="scrollTopButton" class="scroll-top-button"><i class="fa-solid fa-arrow-up fa-lg" style="color: #ffffff;"></i></div>
          <!-- <svg width="32" height="32" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" class="">
          <path fill-rule="evenodd" clip-rule="evenodd" d="M15.905 26.376c-.78 0-1.412-.632-1.412-1.412V9.647L9.41 14.731a1.412 1.412 0 01-1.997-1.997l7.321-7.32a1.412 1.412 0 011.997 0l7.32 7.32a1.412 1.412 0 11-1.996 1.997l-4.738-4.738v14.971c0 .78-.632 1.412-1.412 1.412z" fill="#EFEFEF"> -->
          </path>
          </svg>
          </button>
          </div>
          
        </div>
      </main>
      <header class="header">
        <nav class="navi">
          <a class="navi_a" title="home" href="http://localhost:8081/MovieMate/mainController"><i class="navi-i fa-solid fa-house fa-xl"></i><br><span>Ìôà</span></a>
          <a class="navi_a" title="search" href="http://localhost:8081/MovieMate/SearchMovie"><i class="navi-i fa-sharp fa-solid fa-magnifying-glass fa-xl"></i><br><span>Í≤ÄÏÉâ</span></a>
          <a class="navi_a" title="community" href="http://localhost:8081/MovieMate/freeCommunityController" style="color:#efefef;"><i class="navi-i fa-solid fa-comment-dots fa-flip-horizontal fa-xl"></i><br><span>Ïª§ÎÆ§ÎãàÌã∞</span></a>
          <a class="navi_a" title="myPage" href="http://localhost:8081/MovieMate/myPageController"><i class="navi-i fa-solid fa-user fa-xl"></i><br><span>ÎßàÏù¥ÌéòÏù¥ÏßÄ</span></a>
        </nav>
      </header>
    </div>
  </div>
  <script>
  document.getElementById("freeboard").addEventListener("click", function() {
    window.location.href = "http://localhost:8081/MovieMate/freeCommunityController";
  });
</script>
  <script>
  $(document).ready(function () {
	  var userNick = '<%= session.getAttribute("userNick")%>';
	  document.getElementById('writePost').addEventListener('click', function() {
		if(userNick == "null"){
			alert("Î°úÍ∑∏Ïù∏ ÌõÑ Ïù¥Ïö©Ìï¥Ï£ºÏÑ∏Ïöî.");
			
		}else{
			
			location.href = "http://localhost:8081/MovieMate/InsertMateController";			
		}  
		  
	  });
});
  </script>
  <script>
  $(document).ready(function () {
	    function updateRelativeTime() {
	        var currentTimestamp = Date.now(); // Current timestamp in milliseconds
	        $('.postdate').each(function () {
	            var timestampMillis = parseInt($(this).data('timestamp')); // Timestamp in milliseconds from the data attribute
	            var diff = currentTimestamp - timestampMillis; // Difference between current time and post time
	            var seconds = Math.floor(diff / 1000);
	            var minutes = Math.floor(seconds / 60);
	            var hours = Math.floor(minutes / 60);
	            var days = Math.floor(hours / 24);

	            var relativeTime;
	            if (days > 0) {
	                var date = new Date(timestampMillis);
	                var yyyy = date.getFullYear();
	                var mm = String(date.getMonth() + 1).padStart(2, '0');
	                var dd = String(date.getDate()).padStart(2, '0');
	                relativeTime = yyyy + '.' + mm + '.' + dd;
	            } else if (hours > 0) {
	                relativeTime = hours + 'ÏãúÍ∞Ñ Ï†Ñ';
	            } else if (minutes > 0) {
	                relativeTime = minutes + 'Î∂Ñ Ï†Ñ';
	            } else {
	                relativeTime = 'Î∞©Í∏à Ï†Ñ';
	            }

	            $(this).text(relativeTime);
	        });
	    }

	    updateRelativeTime(); // Update relative time on page load

	    // Update relative time every minute (you can adjust the interval as needed)
	    setInterval(updateRelativeTime, 60000);

	    // Your other JavaScript code here
	});

</script>
 
  <script>
  
  // Initial page value
  var currentPage = 2;
  var loadingData = false; // Flag to prevent multiple AJAX requests

  $(document).ready(function () {
    // ÌéòÏù¥ÏßÄ Î°úÎî© Ïãú loadMoreData Ìï®Ïàò Ìò∏Ï∂úÌïòÏó¨ Ï¥àÍ∏∞ Îç∞Ïù¥ÌÑ∞ Í∞ÄÏ†∏Ïò§Í∏∞
    loadMoreData();
	
    // Ï¥àÍ∏∞Ïóê Ïä§ÌÅ¨Î°§ ÏÉÅÎã® Î≤ÑÌäº Ïà®Í∏∞Í∏∞
    $("#scrollTopButton").hide();
    // ÏÇ¨Ïö©ÏûêÍ∞Ä Ïä§ÌÅ¨Î°§Ìï† ÎïåÎßàÎã§ Ïù¥Î≤§Ìä∏ Ï≤òÎ¶¨
    $(window).scroll(function () {
      // Ïä§ÌÅ¨Î°§ ÏúÑÏπòÍ∞Ä ÌéòÏù¥ÏßÄ ÎÅù Î∂ÄÎ∂ÑÏóê Îã§Îã§Î•¥Î©¥
      if ($(window).scrollTop() + $(window).height() >= $(document).height() - 100) {
        // Avoid making multiple AJAX requests simultaneously
        if (!loadingData) {
          loadingData = true;
          // loadMoreData Ìï®Ïàò Ìò∏Ï∂úÌïòÏó¨ Ï∂îÍ∞Ä Îç∞Ïù¥ÌÑ∞ Í∞ÄÏ†∏Ïò§Í∏∞
          loadMoreData();
        }
      }

      // Ïä§ÌÅ¨Î°§ ÏúÑÏπòÍ∞Ä 300px Ïù¥ÏÉÅÏù¥Î©¥ Ïä§ÌÅ¨Î°§ ÏÉÅÎã® Î≤ÑÌäº ÌëúÏãú, Í∑∏ Ïô∏ÏóêÎäî Ïà®ÍπÄ
      if ($(window).scrollTop() >= 300) {
        $("#scrollTopButton").fadeIn();
      } else {
        $("#scrollTopButton").fadeOut();
      }
    });

    // Ïä§ÌÅ¨Î°§ÏóêÏÑú Îß® ÏúÑÎ°ú Î≤ÑÌäºÏùÑ ÌÅ¥Î¶≠ÌïòÎ©¥ Îß® ÏúÑÎ°ú Ïä§ÌÅ¨Î°§Ìï©ÎãàÎã§
    $("#scrollTopButton").on("click", function () {
      scrollToTop();
    });
  });

  // Ï∂îÍ∞Ä Îç∞Ïù¥ÌÑ∞ Í∞ÄÏ†∏Ïò§Í∏∞ Ìï®Ïàò
  function loadMoreData() {
    console.log("ÏïÑÏûëÏä§ Îì§Ïñ¥Ïò¥");

    // AjaxÎ•º Ïù¥Ïö©ÌïòÏó¨ ÏÑúÎ≤ÑÏóê ÌäπÏ†ï ÌéòÏù¥ÏßÄ Îç∞Ïù¥ÌÑ∞ ÏöîÏ≤≠
    $.ajax({
      url: 'mathCommunityController',  // ÏöîÏ≤≠Ìï† URL
      method: 'GET',  // ÏöîÏ≤≠ Î∞©Ïãù
      data: { currentPage: currentPage },  // ÌòÑÏû¨ ÌéòÏù¥ÏßÄ Ï†ïÎ≥¥ Ï†ÑÏÜ°
      dataType: 'html',  // Î∞òÌôò Îç∞Ïù¥ÌÑ∞ ÌòïÏãù ÏßÄÏ†ï
      success: function (data) {
        // Î∞òÌôòÎêú Îç∞Ïù¥ÌÑ∞Í∞Ä ÎπÑÏñ¥ÏûàÏßÄ ÏïäÏúºÎ©¥
        if (data.trim() !== '') {
          // ÏÑúÎ≤ÑÏóêÏÑú Î∞òÌôòÎêú li ÏöîÏÜåÎì§ÏùÑ $('.list-area--home ul') ÏöîÏÜåÏóê Ï∂îÍ∞Ä
          $('.list-area--home ul').append($(data).find('li'));

          // ÌòÑÏû¨ ÌéòÏù¥ÏßÄ Í∞íÏùÑ Ï¶ùÍ∞ÄÏãúÌÇ¥
          currentPage++;

          // Reset the loading flag to allow new AJAX requests
          loadingData = false;
        }
      },
      error: function (xhr, status, error) {
        // ÏóêÎü¨ Ï≤òÎ¶¨
        loadingData = false;
      }
    });
  }

  // Function to scroll to the top of the page
  function scrollToTop() {
    $("html, body").animate({ scrollTop: 0 }, 300);
  }
  </script>
  <script>
            document.addEventListener("DOMContentLoaded", function(event) {
                var swiperContainer = document.querySelector('.swiper-container');
                var slideWidth = swiperContainer.offsetWidth; // Í∞Å Ïä¨ÎùºÏù¥ÎìúÏùò Í∞ÄÎ°ú Ìè≠
                var scrollDistance = 682.9; // Ïä§ÌÅ¨Î°§Ìï† Í±∞Î¶¨ (Ìïú Ïä¨ÎùºÏù¥ÎìúÏùò Í∞ÄÎ°ú Ìè≠Í≥º ÎèôÏùº)

                var isNextButtonClicked = false; // 'allReviewsNext' Î≤ÑÌäºÏù¥ ÌÅ¥Î¶≠ÎêòÏóàÎäîÏßÄ Ïó¨Î∂ÄÎ•º Ï∂îÏ†ÅÌïòÎäî ÌîåÎûòÍ∑∏
                var isMouseDown = false;
                var startX, scrollLeft;

                function updateButtonVisibility() {
                    // Ïò§Î•∏Ï™ΩÏúºÎ°ú Ïä§ÌÅ¨Î°§Ìï† ÎÇ¥Ïö©Ïù¥ ÎÇ®ÏïÑÏûàÎäîÏßÄ ÌôïÏù∏
                    var remainingScrollWidth = swiperContainer.scrollWidth - swiperContainer.scrollLeft - swiperContainer.offsetWidth;
                    var shouldShowNextButton = remainingScrollWidth > 0;
                    var shouldShowPrevButton = swiperContainer.scrollLeft > 0;

                    // 'allReviewsNext' Î≤ÑÌäºÏùò ÌëúÏãú Ïó¨Î∂Ä Í≤∞Ï†ï
                    var allReviewsNextButton = document.getElementById('allReviewsNext');
                    if (shouldShowNextButton) {
                        allReviewsNextButton.style.display = 'block';
                    } else {
                        allReviewsNextButton.style.display = 'none';
                    }

                    // 'allReviewsPrev' Î≤ÑÌäºÏùò ÌëúÏãú Ïó¨Î∂ÄÎ•º isNextButtonClicked ÌîåÎûòÍ∑∏ÏôÄ Ïó∞ÎèôÌïòÏó¨ Í≤∞Ï†ï
                    var allReviewsPrevButton = document.getElementById('allReviewsPrev');
                    if (shouldShowPrevButton && isNextButtonClicked) {
                        allReviewsPrevButton.style.display = 'block';
                    } else {
                        allReviewsPrevButton.style.display = 'none';
                    }
                }

                // Î≤ÑÌäº ÌëúÏãú Ïó¨Î∂Ä Ï¥àÍ∏∞ Ï≤¥ÌÅ¨
                updateButtonVisibility();

                document.getElementById('allReviewsNext').addEventListener('click', function() {
                    // ÌòÑÏû¨ Ïä§ÌÅ¨Î°§ ÏúÑÏπòÏôÄ Ïù¥ÎèôÌï† ÏúÑÏπò Í≥ÑÏÇ∞
                    var currentPosition = swiperContainer.scrollLeft;
                    var targetPosition = currentPosition + scrollDistance; // Ïò§Î•∏Ï™ΩÏúºÎ°ú Ïä§ÌÅ¨Î°§ÌïòÍ∏∞ ÏúÑÌï¥ "+" ÏÇ¨Ïö©

                    // Ïä§ÌÅ¨Î°§ Ïï†ÎãàÎ©îÏù¥ÏÖò Ï†ÅÏö©
                    swiperContainer.scrollTo({
                        left: targetPosition,
                        behavior: 'smooth', // Î∂ÄÎìúÎüΩÍ≤å Ïï†ÎãàÎ©îÏù¥ÏÖò Ìö®Í≥º Ï†ÅÏö©
                    });

                    // 'allReviewsNext' Î≤ÑÌäºÏù¥ ÌÅ¥Î¶≠ÎêòÏóàÎã§Îäî ÌîåÎûòÍ∑∏Î•º trueÎ°ú ÏÑ§Ï†ï
                    isNextButtonClicked = true;

                    // Ïä§ÌÅ¨Î°§ Ïï†ÎãàÎ©îÏù¥ÏÖòÏù¥ ÎÅùÎÇú ÌõÑ Î≤ÑÌäº ÌëúÏãú ÏÉÅÌÉú ÏóÖÎç∞Ïù¥Ìä∏
                    setTimeout(updateButtonVisibility, 500); // ÌïÑÏöîÏóê Îî∞Îùº timeout Í∞íÏùÑ Ï°∞Ï†ïÌï©ÎãàÎã§.
                });

                document.getElementById('allReviewsPrev').addEventListener('click', function() {
                    // ÌòÑÏû¨ Ïä§ÌÅ¨Î°§ ÏúÑÏπòÏôÄ Ïù¥ÎèôÌï† ÏúÑÏπò Í≥ÑÏÇ∞
                    console.log("aa");
                    var currentPosition = swiperContainer.scrollLeft;
                    var targetPosition = currentPosition - scrollDistance; // ÏôºÏ™ΩÏúºÎ°ú Ïä§ÌÅ¨Î°§ÌïòÍ∏∞ ÏúÑÌï¥ "-" ÏÇ¨Ïö©

                    // Ïä§ÌÅ¨Î°§ Ïï†ÎãàÎ©îÏù¥ÏÖò Ï†ÅÏö©
                    swiperContainer.scrollTo({
                        left: targetPosition,
                        behavior: 'smooth', // Î∂ÄÎìúÎüΩÍ≤å Ïï†ÎãàÎ©îÏù¥ÏÖò Ìö®Í≥º Ï†ÅÏö©
                    });

                    // Ïä§ÌÅ¨Î°§ Ïï†ÎãàÎ©îÏù¥ÏÖòÏù¥ ÎÅùÎÇú ÌõÑ Î≤ÑÌäº ÌëúÏãú ÏÉÅÌÉú ÏóÖÎç∞Ïù¥Ìä∏ ÎîúÎ†àÏù¥ Ï†ÅÏö©
                    setTimeout(function() {
                        // 'allReviewsPrev' Î≤ÑÌäºÏù¥ ÌÅ¥Î¶≠ÎêòÏóàÏùÑ Îïå isNextButtonClicked ÌîåÎûòÍ∑∏Î•º falseÎ°ú ÏÑ§Ï†ï
                        isNextButtonClicked = false;

                        // Ïä§ÌÅ¨Î°§ Ïï†ÎãàÎ©îÏù¥ÏÖòÏù¥ ÎÅùÎÇú ÌõÑ Î≤ÑÌäº ÌëúÏãú ÏÉÅÌÉú ÏóÖÎç∞Ïù¥Ìä∏
                        updateButtonVisibility();
                    }, 300); // ÌïÑÏöîÏóê Îî∞Îùº timeout Í∞íÏùÑ Ï°∞Ï†ïÌï©ÎãàÎã§.
                });

                swiperContainer.addEventListener('mousedown', function(e) {
                    isMouseDown = true;
                    startX = e.pageX - swiperContainer.offsetLeft;
                    scrollLeft = swiperContainer.scrollLeft;
                });

                swiperContainer.addEventListener('mouseleave', function() {
                    isMouseDown = false;
                });

                swiperContainer.addEventListener('mouseup', function() {
                    isMouseDown = false;
                });

                swiperContainer.addEventListener('mousemove', function(e) {
                    if (!isMouseDown) return;
                    e.preventDefault();
                    var x = e.pageX - swiperContainer.offsetLeft;
                    var walk = (x - startX) * 1.5;
                    swiperContainer.scrollLeft = scrollLeft - walk;
                    updateButtonVisibility();
                });
            });
        </script>
</body>
</html>